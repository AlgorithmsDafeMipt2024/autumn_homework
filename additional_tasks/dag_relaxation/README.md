# ะะฐะดะฐัะฐ: ะะตัั ะธ ะะฐัั ะฒ ัััะฐัะฝะพะผ ะปะฐะฑะธัะธะฝัะต

ะะตัั ะธ ะะฐัั - ัะบะพะปัะฝัะต ะดััะทัั. ะ ะบะฐะบ ะฒัะต ัะบะพะปัะฝัะต ะดััะทัั, ะพะฝะธ ัะตัะฝะพ ะพะฑัะฐัััั ั ะพััะฐะฝะฝะธะบะพะผ ะะฐะปะตัะธะตะผ. 

ะะฐะปะตัะธะน ะทะฐ ัะฐะฑะพัะพะน ัะฐััะพ ัะตัะฐะตั ัะฐะทะปะธัะฝัะต ะปะฐะฑะธัะธะฝัั, ะพะดะฝะฐะบะพ ะฒะพะดะธัั ัััะบะพะน ะฟะพ ะฑัะผะฐะณะต ะตะผั ัะถะต ะฝะฐะดะพะตะปะพ ะธ ะพะฝ ะฝะฐัะฐะป ัััะพะธัั ัะฒะพะธ ัะพะฑััะฒะตะฝะฝัะต ะปะฐะฑะธัะธะฝัั ะธะท ัะฐะฝะตัั ะฝะฐ ะทะฐะดะฝะตะผ ะดะฒะพัะต. ะะดะฝะฐะถะดั ะทะธะผะฝะธะผ ะฒะตัะตัะพะผ ะพะฝ ะฟัะตะดะปะพะถะธะป ัะตะฑััะฐะผ ะฟัะพะนัะธ ะตะณะพ ะฟะพัะปะตะดะฝะธะน ะปะฐะฑะธัะธะฝั, ะณะดะต ะพะฝ ัะดะตะปะฐะป 2 ะฒัะพะดะฐ ะธ ะฝะตัะบะพะปัะบะพ ะฒััะพะดะพะฒ. 

ะะพ ัะตะฑััะฐ ััะธััะธะปะธ ะธ ะตัะต ะดะฝัะผ ััะฟะตะปะธ ัะทะฝะฐัั, ะบะฐะบ ะฒัะณะปัะดะธั ะบะฐััะฐ ะปะฐะฑะธัะธะฝัะฐ. ะะฐะปะตัะธะน ะฟัะพะทะฝะฐะป ะพะฑ ะธั ะฒััะพะดะบะต, ะธ ะบะพะณะดะฐ ะดััะทัั ัะถะต ะฝะฐัะฐะปะธ ะตะณะพ ะฟัะพัะพะดะธัั, ัะตะทะบะพ ะฒัะบะปััะธะป ะฒัั ะพัะฒะตัะตะฝะธะต ะทะฐะดะฝะตะณะพ ะดะฒะพัะฐ. ะขะตะฟะตัั ัะตะฑััะฐะผ, ะบะพัะพััะต ะฒัั ะตัะต ะฑะพัััั ัะตะผะฝะพัั, ะฝะตะพะฑัะพะดะธะผะพ ะบะฐะบ ะผะพะถะฝะพ ัะบะพัะตะต ะฒัะฑัะฐัััั ะธะท ะฝะตะณะพ, ะฝะต ะพะฑะพัะฐัะธะฒะฐััั ะฝะฐะทะฐะด. 

ะะพะผั ะฟะตัะฒัะผ ะธะท ะฝะธั ัะดะฐัััั ััะพ ัะดะตะปะฐัั, ะตัะปะธ ะพะฝะธ ะธะดัั ะฟะพ ะบัะฐััะฐะนัะตะผั ะฟััะธ? (ะธัะฟะพะปัะทะพะฒะฐัั ะฒัะพะด ัะบะพะปัะฝะพะณะพ ะดััะณะฐ ะบะฐะบ ะฒััะพะด - ะผะพะถะฝะพ)

## ะัะพะดะฝัะต ะดะฐะฝะฝัะต:

  ะะฐะฑะธัะธะฝั ะฒ ัะตะบััะพะฒะพะผ ะผะฝะพะณะพัััะพัะฝะพะผ ัะพัะผะฐัะต: 
  * `#` - ััะตะฝะฐ
  * `0` - ะฟัะพัะพะด
  * `V` - ัะพัะบะฐ ะฒัะพะดะฐ ะะฐัะธ
  * `P` - ัะพัะบะฐ ะฒัะพะดะฐ ะะตัะธ

  ะพะบะฐะฝัะธะฒะฐะตััั ะฟัััะพะน ัััะพะบะพะน

ะัะธะผะตัั:
```
##V########
#000000000#
#0#####0#0#
#0#00000#0#
#####0###0#
P0#000#000#
#0###0#0#0#
#0#000#0#0#
#0#0###0#0#
#000#000#0#
#0###0#####

```

```
##V########
#000000000#
#0#####0#0#
#0#00000#0#
#####0###0#
P0#000#000#
#0###0#0#0#
#0#000#0#0#
#0#0###0#0#
#000#000#0#
#####0#####

```

```
###V#########
#00000000#00#
#0####0####0#
00#0#0000000#
#0#0#######0#
#0#0#0000000#
#0#0#0###0###
#0#00000#000#
#0#########0#
#0000#000000#
####0##P#####

```

```
#########V##
#000000#000#
#0####0#0#0#
#0#00#0#0#0#
00#0##0#0#0#
#0#0#00#0#0#
#0#0#0##0#0#
#0#00000000#
#0##########
#00000000000
##P#########

```

```
##V###
#00#0P
#0##0#
#0000#
######

```

## ะััะพะดะฝัะต ะดะฐะฝะฝัะต:

  * ะ ะตะดะธะฝััะฒะตะฝะฝัั ัััะพะบะต ะธะผั ะฟะพะฑะตะดะธัะตะปั ะธ ะดะปะธะฝะฐ ะตะณะพ ะบัะฐััะฐะนัะตะณะพ ะผะฐัััััะฐ.
  * ะ ัะปััะฐะต ะฝะธััะธ ะฒัะฒะตััะธ "Draw!" ะธ ะดะปะธะฝั ะบัะฐััะฐะนัะตะณะพ ะฟััะธ.
  * ะ ัะปััะฐะต, ะบะพะณะดะฐ ะธะท ะปะฐะฑะธัะธะฝัะฐ ะฝะต ัะดะฐะตััั ะฒัะนัะธ, ะฒัะฒะตััะธ "Standoff! Valery!", ัะตะผ ัะฐะผัะผ ะพะฑะพะทะฝะฐัะฐั, ััะพ ะพััะฐะฝะฝะธะบ ะฟัะพะฒะตะป ะดััะทะตะน.


# ะัะฟะพะปัะทัะตะผัะน ะฐะปะณะพัะธัะผ: ะฟะพัััะพะตะฝะธะต ะดะตัะตะฒะฐ ะบัะฐััะฐะนัะธั ะฟััะตะน: DAG Relaxation (ะบะฐะบ ะฒัััะฝะธะปะพัั, ะดะปั ััะพะน ะทะฐะดะฐัะธ ะฟะพะดัะพะดะธั ะพัะตะฝั ะฝะต ะพัะตะฝั...)

ะะปะณะพัะธัะผ ัะตะปะฐะบัะฐัะธะธ  ัะฒะปัะตััั ััะฐะฝะดะฐััะฝัะผ ะฐะปะณะพัะธัะผะพะผ ะดะปั ะฝะฐัะพะถะดะตะฝะธั ะบัะฐััะฐะนัะธั ะฟััะตะน ะฒ ะฝะฐะฟัะฐะฒะปะตะฝะฝะพะผ ะฐัะธะบะปะธัะฝะพะผ ะณัะฐัะต (DAG). ะะปะณะพัะธัะผ ัะฐะฑะพัะฐะตั, ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ ะพะฑะฝะพะฒะปัั ัะฐัััะพัะฝะธั ะดะพ ะบะฐะถะดะพะน ะฒะตััะธะฝั, ะธัะฟะพะปัะทัั ะธะฝัะพัะผะฐัะธั ะพ ัะฐัััะพัะฝะธัั ะดะพ ะตั ะฟัะตะดะบะพะฒ. ะะฝ ัะฐะฑะพัะฐะตั ะทะฐ ะปะธะฝะตะนะฝะพะต ะฒัะตะผั (`O(|V|+|E|)`, ะณะดะต `V` - ะบะพะปะธัะตััะฒะพ ะฒะตััะธะฝ, ะฐ `E` - ะบะพะปะธัะตััะฒะพ ัะตะฑะตั).

## ะขะตะพัะธั ะฐะปะณะพัะธัะผะฐ
`๐ฟ(๐, ๐ก)` = โโ ๐๐ ๐กโ๐๐๐ ๐๐ ๐ ๐๐๐กโ ๐๐๐๐ ๐ ๐ก๐ ๐ก ๐๐๐๐ก๐๐๐๐
๐ ๐๐๐๐๐ก๐๐ฃ๐-๐ค๐๐๐โ๐ก ๐๐ฆ๐๐๐

ะัะปะธ ะธะทะฒะตััะฝั `ฮด(s, v)` ะดะปั ะฒัะตั ะฒะตััะธะฝ `v โ V`, ัะพ ะผะพะถะตะผ 
ะฟะพัััะพะธัั ะดะตัะตะฒะพ ะบัะฐััะฐะนัะธั ะฟััะตะน ะทะฐ `O(|V|+|E|)`.

`๐ฟ(๐, ๐ก)` โ ะบัะฐััะฐะนัะธะน ะฟััั
`d(๐, ๐ก)` โ ะพัะตะฝะบะฐ ัะฐัััะพัะฝะธั

ะะพะดะดะตัะถะธะฒะฐะตะผ `d(s, v)` (ะธะทะฝะฐัะฐะปัะฝะพ โ) ะดะปั ะบะฐะถะดะพะน `v โ V`, 
ะบะพัะพัะฐั ะฒัะตะณะดะฐ ะพะณัะฐะฝะธัะธะฒะฐะตั ัะฒะตััั `ฮด(s, v)`, ะฟะพััะตะฟะตะฝะฝะพ 
ะฟะพะฝะธะถะฐั `d`, ะฟะพะบะฐ ะฝะต ะดะพััะธะณะฝะตะผ: `d(s, v) = ฮด(s, v)`.

ะะพะณะดะฐ ะฟะพะฝะธะถะฐะตะผ ะพัะตะฝะบั? 

ะะตัะฐะฒะตะฝััะฒะพ ััะตัะณะพะปัะฝะธะบะฐ: ะฒะตั ะบัะฐััะฐะนัะตะณะพ ะฟััะธ ะธะท `u` ะฒ `v` 
ะฝะต ะผะพะถะตั ะฑััั ะฑะพะปััะต ัะตะผ ะบัะฐััะฐะนัะธะน ะฟััั ะธะท `u` ะฒ `v` ัะตัะตะท 
ะดััะณัั ะฒะตััะธะฝั `x`.
`๐ฟ(๐ข,๐ฃ) โค ๐ฟ(๐ข,๐ฅ) + ๐ฟ(๐ฅ,๐ฃ) ๐๐๐ ๐๐๐ ๐ข, ๐ฃ, ๐ฅ โ ๐`

## ะะฑัััะฝะตะฝะธะต ะบะพะดะฐ:

```C++
/**
 * @brief ะััะธัะปัะตั ะบัะฐััะฐะนัะธะต ะฟััะธ ะพั ะทะฐะดะฐะฝะฝะพะน ะฝะฐัะฐะปัะฝะพะน ะฒะตััะธะฝั ะดะพ ะฒัะตั ะดััะณะธั
 * ะฒะตััะธะฝ ะฒ ะฝะฐะฟัะฐะฒะปะตะฝะฝะพะผ ะฐัะธะบะปะธัะตัะบะพะผ ะณัะฐัะต (DAG) ั ะฟะพะผะพััั ัะตะปะฐะบัะฐัะธะธ.
 * @tparam vert_t: ัะธะฟ ะฒะตััะธะฝั ะฒ ะณัะฐัะต
 * @tparam weight_t: ัะธะฟ ะฒะตัะฐ ะฒ ะณัะฐัะต
 * @param graph: ะณัะฐั, ะดะปั ะบะพัะพัะพะณะพ ะฝะตะพะฑัะพะดะธะผะพ ะฒััะธัะปะธัั ะบัะฐััะฐะนัะธะต ะฟััะธ.
 * @param start_vert: ะฝะฐัะฐะปัะฝะฐั ะฒะตััะธะฝะฐ, ะพั ะบะพัะพัะพะน ะฒััะธัะปััััั ัะฐัััะพัะฝะธั.
 * @throw std::invalid_argument("DAGRelaxation: there is no such start
 * vertice.")
 * @throw std::invalid_argument("DAGRelaxation: graph is not directed.");
 * @return std::unordered_map<vert_t, weight_t>: ัะปะพะฒะฐัั, ะณะดะต ะบะปัั - ะฒะตััะธะฝะฐ, ะฐ
 * ะทะฝะฐัะตะฝะธะต - ะบัะฐััะฐะนัะตะต ัะฐัััะพัะฝะธะต ะพั start_vert ะดะพ ััะพะน ะฒะตััะธะฝั
 * (ะตัะปะธ ะดะพ ะฒะตััะธะฝั ะฝะตั ะฟััะธ, ัะพ ะทะฝะฐัะตะฝะธะต ะฑัะดะตั ัะฐะฒะฝะพ
 * std::numeric_limits<weight_t>::max())
 */
template <AllowedVertType vert_t, AllowedWeightType weight_t>
std::unordered_map<vert_t, weight_t> DAGRelaxation(
    const Graph<vert_t, weight_t>& graph, vert_t start_vert)
```

1. ะัะพะฒะตััะตั, ััะพ ะณัะฐั ะฝะฐะฟัะฐะฒะปะตะฝะฝัะน ะธ ััะพ ะฝะฐัะฐะปัะฝะฐั ะฒะตััะธะฝะฐ ัััะตััะฒัะตั.
2. ะะฝะธัะธะฐะปะธะทะธััะตั ัะปะพะฒะฐัั (ัะตั-ัะฐะฑะปะธัั) `dists`, ะณะดะต ััะฐะฝัััั ัะฐัััะพัะฝะธั ะพั ะฝะฐัะฐะปัะฝะพะน ะฒะตััะธะฝั ะดะพ ะบะฐะถะดะพะน. ะัะต ัะฐัััะพัะฝะธั ะธะทะฝะฐัะฐะปัะฝะพ ะฑะตัะบะพะฝะตัะฝั, ะบัะพะผะต ัะฐัััะพัะฝะธั ะดะพ ัะฐะผะพะน ะฝะฐัะฐะปัะฝะพะน ะฒะตััะธะฝั, ะบะพัะพัะพะต ัะฐะฒะฝะพ ะฝัะปั.
3. ะกะพััะธััะตั ะฒะตััะธะฝั ะณัะฐัะฐ ะฟะพ ัะพะฟะพะปะพะณะธัะตัะบะพะผั ะฟะพััะดะบั (ััะพะฑั ะฟะพัะตัะธัั ะฒะตััะธะฝั ัะพะปัะบะพ ะฟะพัะปะต ะฟะพัะตัะตะฝะธั ะฒัะตั ะตะต ะฟัะตะดะบะพะฒ).
4. ะัะพัะพะดะธั ะฟะพ ะบะฐะถะดะพะน ะฒะตััะธะฝะต ะฒ ััะพะผ ะฟะพััะดะบะต ะธ ะพะฑะฝะพะฒะปัะตั ัะฐัััะพัะฝะธั ะดะพ ะฒัะตั ัะผะตะถะฝัั ะฒะตััะธะฝ, ะตัะปะธ ัะตะบััะตะต ัะฐัััะพัะฝะธะต ะดะพ ัะผะตะถะฝะพะน ะฒะตััะธะฝั ะฑะพะปััะต, ัะตะผ ััะผะผะฐ ัะฐัััะพัะฝะธั ะดะพ ัะตะบััะตะน ะฒะตััะธะฝั ะธ ะฒะตัะฐ ัะตะฑัะฐ ะผะตะถะดั ะฝะธะผะธ.

ะ ะธัะพะณะต `dists` ะฑัะดะตั ัะพะดะตัะถะฐัั ะบัะฐััะฐะนัะธะต ัะฐัััะพัะฝะธั ะพั ะฝะฐัะฐะปัะฝะพะน ะฒะตััะธะฝั ะดะพ ะฒัะตั ะพััะฐะปัะฝัั ะฒะตััะธะฝ ะฒ ะณัะฐัะต.

ะัะฝะพะฒะฝัะต ะผะพะผะตะฝัั:
* ะขะพะฟะพะปะพะณะธัะตัะบะฐั ัะพััะธัะพะฒะบะฐ ะฒะฐะถะฝะฐ, ััะพะฑั ะณะฐัะฐะฝัะธัะพะฒะฐัั, ััะพ ะผั ะฝะต ะฑัะดะตะผ ะพะฑะฝะพะฒะปััั ัะฐัััะพัะฝะธั ะดะพ ะฒะตััะธะฝั, ะฟะพะบะฐ ะฝะต ะฝะฐะนะดะตะผ ะบัะฐััะฐะนัะธะน ะฟััั ะบ ะตะต ะฟัะตะดะบั.
* ะะตะปะฐะบัะฐัะธั - ััะพ ะฟัะพัะตัั ะพะฑะฝะพะฒะปะตะฝะธั ัะฐัััะพัะฝะธะน ะดะพ ะฒะตััะธะฝ, ะธัะฟะพะปัะทัั ะธะฝัะพัะผะฐัะธั ะพ ัะฐัััะพัะฝะธัั ะดะพ ะธั ะฟัะตะดะบะพะฒ.
* ะะพะด ัะฐะฑะพัะฐะตั ัะพะปัะบะพ ะดะปั DAG, ัะฐะบ ะบะฐะบ ะดะปั ัะธะบะปะธัะตัะบะธั ะณัะฐัะพะฒ ะผะพะถะตั ะฝะต ััะพะดะธัััั.

