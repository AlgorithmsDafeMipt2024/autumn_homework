# 4.7. Система непересекающихся множеств. Эвристика потенциалов без доказательства. Эвристика сжатия пути без доказательства. Почти константное время работы(без доказательства).

## Введение

Система непересекающихся множеств (Union-Find) — это структура данных, которая поддерживает динамическое разбиение множества объектов на непересекающиеся подмножества. Она позволяет эффективно выполнять две основные операции:

1. **Find**: Определить, к какому подмножеству принадлежит элемент.
2. **Union**: Объединить два подмножества в одно.

---

## Основные операции

### Операция `Find`:
Находит представителя (лидера) множества, к которому принадлежит заданный элемент. Представитель используется для идентификации множества.

### Операция `Union`:
Объединяет два множества, обновляя их представителя. 

---

## Эвристики для оптимизации

### 1. Эвристика потенциалов (Union by Rank)
Каждому множеству сопоставляется ранг (глубина дерева). При выполнении операции `Union` множество с меньшим рангом становится потомком множества с большим рангом. Это предотвращает увеличение глубины дерева, сохраняя его плоским.

**Идея:**
- Если ранг \( A \) меньше ранга \( B \), то корень множества \( A \) становится потомком корня множества \( B \).
- Если ранги равны, то один из корней выбирается произвольно, а его ранг увеличивается на 1.

---

### 2. Эвристика сжатия пути (Path Compression)
Эта эвристика применяется во время выполнения операции `Find`. Все вершины на пути от элемента к корню напрямую присоединяются к корню, тем самым уменьшая глубину дерева.

**Идея:**
- Во время поиска представителя множества обновить ссылки всех промежуточных узлов на корень.

---

## Почти константное время работы

Комбинация эвристик потенциалов и сжатия пути приводит к амортизированной сложности операций \( O(\alpha(V)) \), где \( \alpha(V) \) — обратная функция Аккермана, растущая чрезвычайно медленно. На практике для всех мыслимых графов \( \alpha(V) \) не превосходит 5, что делает время работы операций практически константным.

---

## Применения

Система непересекающихся множеств широко используется в задачах на графах:
- Алгоритмы Крускала и Борувки для минимального остовного дерева.
- Определение компонент связности в графе.
- Объединение интервалов в задачах на пересечение.
