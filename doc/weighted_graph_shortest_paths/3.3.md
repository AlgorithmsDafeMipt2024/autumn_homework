# 3.3. Алгоритм A*. Условие монотонности на эвристику. Примеры эвристик.

## Алгоритм A*

**Алгоритм A*** — это алгоритм поиска, который находит кратчайший путь в графах с учётом как фактического расстояния от начальной вершины, так и эвристической оценки расстояния до цели. Этот алгоритм является модификацией алгоритма Дейкстры и использует жадность для выбора наиболее перспективного пути на каждом шаге.

### Описание алгоритма:

1. **Инициализация**:
   - Задаём начальную вершину.
   - Для каждой вершины вычисляется два значения:
     - **g(v)** — стоимость пути от начальной вершины до вершины \( v \).
     - **h(v)** — эвристическая оценка (предсказание стоимости пути от вершины \( v \) до цели).
   - Множество открытых вершин (очередь) состоит из начальной вершины.

2. **Основной цикл**:
   - Пока очередь не пуста:
     1. Извлекаем вершину \( v \) с минимальным значением \( f(v) = g(v) + h(v) \).
     2. Если вершина \( v \) — это цель, путь найден.
     3. Для всех соседей вершины \( v \) обновляем значения \( g(v) \) и \( h(v) \) и добавляем их в очередь.

3. **Завершение**:
   - Алгоритм завершает выполнение, когда цель достигнута или все возможные пути исследованы.

---

## Условие монотонности на эвристику

**Монотонность эвристики** (или условие консистентности) — это важное условие для корректности алгоритма A*. Оно гласит, что для каждого ребра \( (u, v) \) в графе эвристическая функция \( h(v) \) должна быть не больше, чем стоимость пути через вершину \( u \) плюс эвристическая оценка вершины \( v \):

\[
h(u) \leq w(u, v) + h(v)
\]

где:
- \( w(u, v) \) — стоимость ребра от вершины \( u \) к вершине \( v \).
- \( h(u) \) и \( h(v) \) — эвристические оценки для вершин \( u \) и \( v \), соответственно.

Если эвристика удовлетворяет условию монотонности, это гарантирует, что алгоритм A* всегда будет находить кратчайший путь.

### Почему условие монотонности важно:
- Монотонность предотвращает ситуации, когда алгоритм может "перепрыгнуть" через оптимальный путь, оценив его как более дорогой, чем он есть на самом деле.
- Это условие помогает гарантировать корректность поиска и отсутствие циклов в процессе выполнения алгоритма.

---

## Примеры эвристик

Эвристика в алгоритме A* используется для оценки стоимости оставшегося пути от текущей вершины до цели. Важно, чтобы эвристика была допустимой (не переоценивала истинную стоимость пути) и, если возможно, монотонной.

### Примеры эвристик:

1. **Манхэттенское расстояние**:
   В двумерной решётке (например, шахматная доска) манхэттенское расстояние между двумя точками — это сумма абсолютных разностей их координат. Это эвристика, часто используемая для поиска пути в сетке с ограничением на движение только по вертикали и горизонтали.

   \[
   h(x, y) = |x_1 - x_2| + |y_1 - y_2|
   \]

2. **Евклидово расстояние**:
   Это стандартная эвристика, которая используется в графах с произвольным расположением вершин. Оно представляет собой прямое расстояние между двумя точками в пространстве, и часто используется в задачах с возможностью движения в любом направлении (в том числе по диагонали).

   \[
   h(x, y) = \sqrt{(x_1 - x_2)^2 + (y_1 - y_2)^2}
   \]

3. **Частичное решение задачи**:
   В некоторых задачах эвристика может быть основана на частичном решении задачи. Например, в задаче о решении головоломки, такой как "15 puzzle", эвристика может быть основана на количестве неправильных плиток или их расстоянии от правильных позиций.

4. **Количество оставшихся шагов**:
   В некоторых случаях эвристика может быть основана на простом подсчёте оставшихся шагов или действиях для достижения цели.

---

## Заключение

- **Алгоритм A*** является мощным инструментом для поиска кратчайших путей с использованием как реальных, так и эвристических оценок.
- **Условие монотонности** на эвристику гарантирует корректность алгоритма, предотвращая использование неправильных или переоценённых путей.
- Примеры эвристик, такие как манхэттенское расстояние и евклидово расстояние, широко применяются в реальных задачах поиска путей, таких как навигация в сетках и графах.
- При правильном выборе эвристики алгоритм A* может эффективно находить оптимальные решения для различных задач.

